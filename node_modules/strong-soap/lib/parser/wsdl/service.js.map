{"version":3,"sources":["../../../src/parser/wsdl/service.js"],"names":["WSDLElement","require","QName","Service","constructor","nsName","attrs","options","ports","postProcess","definitions","children","bindings","length","i","child","name","bindingName","parse","$binding","binding","$name","location","splice","err","describe","descriptor","port","elementName","allowedChildren","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,WAAW,GAAGC,OAAO,CAAC,eAAD,CAAzB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,UAAD,CAAnB;;AAEA,MAAME,OAAN,SAAsBH,WAAtB,CAAkC;AAChCI,EAAAA,WAAW,CAACC,MAAD,EAASC,KAAT,EAAgBC,OAAhB,EAAyB;AAClC,UAAMF,MAAN,EAAcC,KAAd,EAAqBC,OAArB;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;AAEDC,EAAAA,WAAW,CAACC,WAAD,EAAc;AACvB,QAAI;AACF,UAAIC,QAAQ,GAAG,KAAKA,QAApB;AAAA,UACEC,QAAQ,GAAGF,WAAW,CAACE,QADzB;;AAEA,UAAID,QAAQ,IAAIA,QAAQ,CAACE,MAAT,GAAkB,CAAlC,EAAqC;AACnC,aAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,KAAhB,EAAuBA,KAAK,GAAGJ,QAAQ,CAACG,CAAD,CAAvC,EAA4CA,CAAC,EAA7C,EAAiD;AAC/C,cAAIC,KAAK,CAACC,IAAN,KAAe,MAAnB,EACE;AACF,cAAIC,WAAW,GAAGf,KAAK,CAACgB,KAAN,CAAYH,KAAK,CAACI,QAAlB,EAA4BH,IAA9C;AACA,cAAII,OAAO,GAAGR,QAAQ,CAACK,WAAD,CAAtB;;AACA,cAAIG,OAAJ,EAAa;AACXA,YAAAA,OAAO,CAACX,WAAR,CAAoBC,WAApB;AACA,iBAAKF,KAAL,CAAWO,KAAK,CAACM,KAAjB,IAA0B;AACxBC,cAAAA,QAAQ,EAAEP,KAAK,CAACO,QADQ;AAExBF,cAAAA,OAAO,EAAEA;AAFe,aAA1B;AAIAT,YAAAA,QAAQ,CAACY,MAAT,CAAgBT,CAAC,EAAjB,EAAqB,CAArB;AACD;AACF;AACF;AACF,KAnBD,CAmBE,OAAOU,GAAP,EAAY;AACZ,YAAMA,GAAN;AACD;AACF;;AAEDC,EAAAA,QAAQ,CAACf,WAAD,EAAc;AACpB,QAAI,KAAKgB,UAAT,EAAqB,OAAO,KAAKA,UAAZ;AACrB,QAAIlB,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIQ,IAAT,IAAiB,KAAKR,KAAtB,EAA6B;AAC3B,UAAImB,IAAI,GAAG,KAAKnB,KAAL,CAAWQ,IAAX,CAAX;AACAR,MAAAA,KAAK,CAACQ,IAAD,CAAL,GAAcW,IAAI,CAACP,OAAL,CAAaK,QAAb,CAAsBf,WAAtB,CAAd;AACD;;AACD,SAAKgB,UAAL,GAAkBlB,KAAlB;AACA,WAAO,KAAKkB,UAAZ;AACD;;AAxC+B;;AA4ClCvB,OAAO,CAACyB,WAAR,GAAsB,SAAtB;AACAzB,OAAO,CAAC0B,eAAR,GAA0B,CAAC,MAAD,EAAS,eAAT,CAA1B;AAEAC,MAAM,CAACC,OAAP,GAAiB5B,OAAjB","sourcesContent":["// Copyright IBM Corp. 2016,2018. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar WSDLElement = require('./wsdlElement');\nvar QName = require('../qname');\n\nclass Service extends WSDLElement {\n  constructor(nsName, attrs, options) {\n    super(nsName, attrs, options);\n    this.ports = {};\n  }\n\n  postProcess(definitions) {\n    try {\n      var children = this.children,\n        bindings = definitions.bindings;\n      if (children && children.length > 0) {\n        for (var i = 0, child; child = children[i]; i++) {\n          if (child.name !== 'port')\n            continue;\n          var bindingName = QName.parse(child.$binding).name;\n          var binding = bindings[bindingName];\n          if (binding) {\n            binding.postProcess(definitions);\n            this.ports[child.$name] = {\n              location: child.location,\n              binding: binding\n            };\n            children.splice(i--, 1);\n          }\n        }\n      }\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  describe(definitions) {\n    if (this.descriptor) return this.descriptor;\n    var ports = {};\n    for (var name in this.ports) {\n      var port = this.ports[name];\n      ports[name] = port.binding.describe(definitions);\n    }\n    this.descriptor = ports;\n    return this.descriptor;\n  }\n\n}\n\nService.elementName = 'service';\nService.allowedChildren = ['port', 'documentation'];\n\nmodule.exports = Service;\n"],"file":"service.js"}