{"version":3,"sources":["../../../src/parser/xsd/keybase.js"],"names":["g","require","XSDElement","KeyBase","constructor","nsName","attrs","options","selector","fields","addChild","child","name","warn","$name","$xpath","push","postProcess","definitions","length","allowedChildren","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,CAAC,GAAGC,OAAO,CAAC,iBAAD,CAAf;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,cAAD,CAAxB;;AAEA,MAAME,OAAN,SAAsBD,UAAtB,CAAiC;AAC/BE,EAAAA,WAAW,CAACC,MAAD,EAASC,KAAT,EAAgBC,OAAhB,EAAyB;AAClC,UAAMF,MAAN,EAAcC,KAAd,EAAqBC,OAArB;AACA,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,MAAL,GAAc,EAAd;AACD;;AAEDC,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACd,QAAIA,KAAK,CAACC,IAAN,KAAe,UAAnB,EAA+B;AAC7B,UAAI,KAAKJ,QAAT,EAAmB;AACjBR,QAAAA,CAAC,CAACa,IAAF,CACE,sEADF,EAEE,KAAKR,MAFP,EAEe,KAAKS,KAFpB;AAGD;;AACD,WAAKN,QAAL,GAAgBG,KAAK,CAACI,MAAtB;AACD,KAPD,MAOO,IAAIJ,KAAK,CAACC,IAAN,KAAe,OAAnB,EAA4B;AACjC,WAAKH,MAAL,CAAYO,IAAZ,CAAiBL,KAAK,CAACI,MAAvB;AACD;AACF;;AAEDE,EAAAA,WAAW,CAACC,WAAD,EAAc;AACvB,QAAI,CAAC,KAAKV,QAAV,EAAoB;AAClBR,MAAAA,CAAC,CAACa,IAAF,CACE,sEADF,EAEE,KAAKR,MAFP,EAEe,KAAKS,KAFpB;AAGD;;AACD,QAAI,CAAC,KAAKL,MAAL,CAAYU,MAAjB,EAAyB;AACvBnB,MAAAA,CAAC,CAACa,IAAF,CACE,+DADF,EAEE,KAAKR,MAFP,EAEe,KAAKS,KAFpB;AAGD;AACF;;AA/B8B;;AAkCjCX,OAAO,CAACiB,eAAR,GAA0B,CAAC,YAAD,EAAe,UAAf,EAA2B,OAA3B,CAA1B;AAEAC,MAAM,CAACC,OAAP,GAAiBnB,OAAjB","sourcesContent":["// Copyright IBM Corp. 2016,2017. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar g = require('../../globalize');\nvar XSDElement = require('./xsdElement');\n\nclass KeyBase extends XSDElement {\n  constructor(nsName, attrs, options) {\n    super(nsName, attrs, options);\n    this.selector = null;\n    this.fields = [];\n  }\n\n  addChild(child) {\n    if (child.name === 'selector') {\n      if (this.selector) {\n        g.warn(\n          'The key element %s %s MUST contain one and only one selector element',\n          this.nsName, this.$name);\n      }\n      this.selector = child.$xpath;\n    } else if (child.name === 'field') {\n      this.fields.push(child.$xpath);\n    }\n  }\n\n  postProcess(definitions) {\n    if (!this.selector) {\n      g.warn(\n        'The key element %s %s MUST contain one and only one selector element',\n        this.nsName, this.$name);\n    }\n    if (!this.fields.length) {\n      g.warn(\n        'The key element %s %s MUST contain one or more field elements',\n        this.nsName, this.$name);\n    }\n  }\n}\n\nKeyBase.allowedChildren = ['annotation', 'selector', 'field'];\n\nmodule.exports = KeyBase;\n"],"file":"keybase.js"}