{"version":3,"sources":["../../src/security/CookieSecurity.js"],"names":["Security","require","hasCookieHeader","cookie","hasOwnProperty","CookieSecurity","constructor","options","Array","isArray","map","c","split","join","addHttpHeaders","headers","Cookie","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,YAAD,CAAtB;;AAEA,SAASC,eAAT,CAA0BC,MAA1B,EAAkC;AAChC,SAAO,OAAOA,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,CAACC,cAAP,CAAsB,YAAtB,CAArC;AACD;AAED;AACA;AACA;;;AACA,MAAMC,cAAN,SAA6BL,QAA7B,CAAsC;AACpCM,EAAAA,WAAW,CAACH,MAAD,EAASI,OAAT,EAAkB;AAC3B,UAAMA,OAAN;AAEAJ,IAAAA,MAAM,GAAGD,eAAe,CAACC,MAAD,CAAf,GAA0BA,MAAM,CAAC,YAAD,CAAhC,GAAiDA,MAA1D;AAEA,SAAKA,MAAL,GAAc,CAACK,KAAK,CAACC,OAAN,CAAcN,MAAd,IAAwBA,MAAxB,GAAiC,CAACA,MAAD,CAAlC,EACXO,GADW,CACPC,CAAC,IAAIA,CAAC,CAACC,KAAF,CAAQ,GAAR,EAAa,CAAb,CADE,EAEXC,IAFW,CAEN,IAFM,CAAd;AAGD;;AAEDC,EAAAA,cAAc,CAACC,OAAD,EAAU;AACtBA,IAAAA,OAAO,CAACC,MAAR,GAAiB,KAAKb,MAAtB;AACD;;AAbmC;;AAgBtCc,MAAM,CAACC,OAAP,GAAiBb,cAAjB","sourcesContent":["// Copyright IBM Corp. 2016. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar Security = require('./security');\n\nfunction hasCookieHeader (cookie) {\n  return typeof cookie === 'object' && cookie.hasOwnProperty('set-cookie');\n}\n\n/*\n * Accepts either a cookie or lastResponseHeaders\n */\nclass CookieSecurity extends Security {\n  constructor(cookie, options) {\n    super(options);\n\n    cookie = hasCookieHeader(cookie) ? cookie['set-cookie'] : cookie;\n\n    this.cookie = (Array.isArray(cookie) ? cookie : [cookie])\n      .map(c => c.split(';')[0])\n      .join('; ');\n  }\n\n  addHttpHeaders(headers) {\n    headers.Cookie = this.cookie;\n  }\n}\n\nmodule.exports = CookieSecurity;\n"],"file":"CookieSecurity.js"}