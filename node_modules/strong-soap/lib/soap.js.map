{"version":3,"sources":["../src/soap.js"],"names":["Client","require","Server","HttpClient","security","passwordDigest","parser","openWSDL","WSDL","open","debug","_wsdlCache","_requestWSDL","url","options","callback","WSDL_CACHE","wsdl","process","nextTick","err","createClient","endpoint","listen","server","pathOrOptions","services","xml","path","uri","exports","BasicAuthSecurity","WSSecurity","WSSecurityCert","ClientSSLSecurity","ClientSSLSecurityPFX","BearerSecurity","XMLHandler","NamespaceContext","QName"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,UAAD,CAApB;AAAA,IACEC,MAAM,GAAGD,OAAO,CAAC,UAAD,CADlB;AAAA,IAEEE,UAAU,GAAGF,OAAO,CAAC,QAAD,CAFtB;AAAA,IAGEG,QAAQ,GAAGH,OAAO,CAAC,YAAD,CAHpB;AAAA,IAIEI,cAAc,GAAGJ,OAAO,CAAC,SAAD,CAAP,CAAmBI,cAJtC;AAAA,IAKEC,MAAM,GAAGL,OAAO,CAAC,gBAAD,CALlB;AAAA,IAMEM,QAAQ,GAAGD,MAAM,CAACE,IAAP,CAAYC,IANzB;AAAA,IAOEC,KAAK,GAAGT,OAAO,CAAC,OAAD,CAAP,CAAiB,kBAAjB,CAPV;;AASA,IAAIU,UAAU,GAAG,EAAjB;;AAEA,SAASC,YAAT,CAAsBC,GAAtB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8C;AAC5C,MAAI,OAAOD,OAAP,KAAmB,UAAvB,EAAmC;AACjCC,IAAAA,QAAQ,GAAGD,OAAX;AACAA,IAAAA,OAAO,GAAG,EAAV;AACD;;AACDH,EAAAA,UAAU,GAAGG,OAAO,CAACE,UAAR,IAAsBL,UAAnC;AAEA,MAAIM,IAAI,GAAGN,UAAU,CAACE,GAAD,CAArB;;AACA,MAAII,IAAJ,EAAU;AACRP,IAAAA,KAAK,CAAC,gCAAD,EAAmCO,IAAnC,CAAL;AACAC,IAAAA,OAAO,CAACC,QAAR,CAAiB,YAAW;AAC1BJ,MAAAA,QAAQ,CAAC,IAAD,EAAOE,IAAP,CAAR;AACD,KAFD;AAGD,GALD,MAMK;AACHV,IAAAA,QAAQ,CAACM,GAAD,EAAMC,OAAN,EAAe,UAASM,GAAT,EAAcH,IAAd,EAAoB;AACzC,UAAIG,GAAJ,EAAS;AACP,eAAOL,QAAQ,CAACK,GAAD,CAAf;AACD,OAFD,MAEO;AACLT,QAAAA,UAAU,CAACE,GAAD,CAAV,GAAkBI,IAAlB;AACD;;AACDF,MAAAA,QAAQ,CAAC,IAAD,EAAOE,IAAP,CAAR;AACD,KAPO,CAAR;AAQD;AACF;;AAED,SAASI,YAAT,CAAsBR,GAAtB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8CO,QAA9C,EAAwD;AACtD,MAAI,OAAOR,OAAP,KAAmB,UAAvB,EAAmC;AACjCQ,IAAAA,QAAQ,GAAGP,QAAX;AACAA,IAAAA,QAAQ,GAAGD,OAAX;AACAA,IAAAA,OAAO,GAAG,EAAV;AACD;;AACDQ,EAAAA,QAAQ,GAAGR,OAAO,CAACQ,QAAR,IAAoBA,QAA/B;AACAZ,EAAAA,KAAK,CAAC,sDAAD,EAAyDG,GAAzD,EAA8DC,OAA9D,CAAL;;AACAF,EAAAA,YAAY,CAACC,GAAD,EAAMC,OAAN,EAAe,UAASM,GAAT,EAAcH,IAAd,EAAoB;AAC7CF,IAAAA,QAAQ,CAACK,GAAD,EAAMH,IAAI,IAAI,IAAIjB,MAAJ,CAAWiB,IAAX,EAAiBK,QAAjB,EAA2BR,OAA3B,CAAd,CAAR;AACD,GAFW,CAAZ;AAGD;;AAED,SAASS,MAAT,CAAgBC,MAAhB,EAAwBC,aAAxB,EAAuCC,QAAvC,EAAiDC,GAAjD,EAAsD;AACpDjB,EAAAA,KAAK,CAAC,uDAAD,EAA0De,aAA1D,EAAyEC,QAAzE,EAAmFC,GAAnF,CAAL;AACA,MAAIb,OAAO,GAAG,EAAd;AAAA,MACEc,IAAI,GAAGH,aADT;AAAA,MAEEI,GAAG,GAAG,IAFR;;AAIA,MAAI,OAAOJ,aAAP,KAAyB,QAA7B,EAAuC;AACrCX,IAAAA,OAAO,GAAGW,aAAV;AACAG,IAAAA,IAAI,GAAGd,OAAO,CAACc,IAAf;AACAF,IAAAA,QAAQ,GAAGZ,OAAO,CAACY,QAAnB;AACAC,IAAAA,GAAG,GAAGb,OAAO,CAACa,GAAd;AACAE,IAAAA,GAAG,GAAGf,OAAO,CAACe,GAAd;AACD;;AAED,MAAIZ,IAAI,GAAG,IAAIX,MAAM,CAACE,IAAX,CAAgBmB,GAAG,IAAID,QAAvB,EAAiCG,GAAjC,EAAsCf,OAAtC,CAAX;AACA,SAAO,IAAIZ,MAAJ,CAAWsB,MAAX,EAAmBI,IAAnB,EAAyBF,QAAzB,EAAmCT,IAAnC,EAAyCH,OAAzC,CAAP;AACD;;AAEDgB,OAAO,CAAC1B,QAAR,GAAmBA,QAAnB;AACA0B,OAAO,CAACC,iBAAR,GAA4B3B,QAAQ,CAAC2B,iBAArC;AACAD,OAAO,CAACE,UAAR,GAAqB5B,QAAQ,CAAC4B,UAA9B;AACAF,OAAO,CAACG,cAAR,GAAyB7B,QAAQ,CAAC6B,cAAlC;AACAH,OAAO,CAACI,iBAAR,GAA4B9B,QAAQ,CAAC8B,iBAArC;AACAJ,OAAO,CAACK,oBAAR,GAA+B/B,QAAQ,CAAC+B,oBAAxC;AACAL,OAAO,CAACM,cAAR,GAAyBhC,QAAQ,CAACgC,cAAlC;AACAN,OAAO,CAACT,YAAR,GAAuBA,YAAvB;AACAS,OAAO,CAACzB,cAAR,GAAyBA,cAAzB;AACAyB,OAAO,CAACP,MAAR,GAAiBA,MAAjB;AACAO,OAAO,CAACtB,IAAR,GAAeF,MAAM,CAACE,IAAtB;AACAsB,OAAO,CAACO,UAAR,GAAqB/B,MAAM,CAAC+B,UAA5B;AACAP,OAAO,CAACQ,gBAAR,GAA2BhC,MAAM,CAACgC,gBAAlC;AACAR,OAAO,CAACS,KAAR,GAAgBjC,MAAM,CAACiC,KAAvB,C,CAEA;;AACAT,OAAO,CAAC5B,MAAR,GAAiBA,MAAjB;AACA4B,OAAO,CAAC9B,MAAR,GAAiBA,MAAjB;AACA8B,OAAO,CAAC3B,UAAR,GAAqBA,UAArB","sourcesContent":["// Copyright IBM Corp. 2016,2018. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n\"use strict\";\n\nvar Client = require('./client'),\n  Server = require('./server'),\n  HttpClient = require('./http'),\n  security = require('./security'),\n  passwordDigest = require('./utils').passwordDigest,\n  parser = require('./parser/index'),\n  openWSDL = parser.WSDL.open,\n  debug = require('debug')('strong-soap:soap');\n\nvar _wsdlCache = {};\n\nfunction _requestWSDL(url, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  _wsdlCache = options.WSDL_CACHE || _wsdlCache;\n\n  var wsdl = _wsdlCache[url];\n  if (wsdl) {\n    debug('_requestWSDL, wsdl in cache %s', wsdl);\n    process.nextTick(function() {\n      callback(null, wsdl);\n    });\n  }\n  else {\n    openWSDL(url, options, function(err, wsdl) {\n      if (err) {\n        return callback(err);\n      } else {\n        _wsdlCache[url] = wsdl;\n      }\n      callback(null, wsdl);\n    });\n  }\n}\n\nfunction createClient(url, options, callback, endpoint) {\n  if (typeof options === 'function') {\n    endpoint = callback;\n    callback = options;\n    options = {};\n  }\n  endpoint = options.endpoint || endpoint;\n  debug('createClient params: wsdl url: %s client options: %j', url, options);\n  _requestWSDL(url, options, function(err, wsdl) {\n    callback(err, wsdl && new Client(wsdl, endpoint, options));\n  });\n}\n\nfunction listen(server, pathOrOptions, services, xml) {\n  debug('listen params: pathOrOptions: %j services: %j xml: %j', pathOrOptions, services, xml);\n  var options = {},\n    path = pathOrOptions,\n    uri = null;\n\n  if (typeof pathOrOptions === 'object') {\n    options = pathOrOptions;\n    path = options.path;\n    services = options.services;\n    xml = options.xml;\n    uri = options.uri;\n  }\n\n  var wsdl = new parser.WSDL(xml || services, uri, options);\n  return new Server(server, path, services, wsdl, options);\n}\n\nexports.security = security;\nexports.BasicAuthSecurity = security.BasicAuthSecurity;\nexports.WSSecurity = security.WSSecurity;\nexports.WSSecurityCert = security.WSSecurityCert;\nexports.ClientSSLSecurity = security.ClientSSLSecurity;\nexports.ClientSSLSecurityPFX = security.ClientSSLSecurityPFX;\nexports.BearerSecurity = security.BearerSecurity;\nexports.createClient = createClient;\nexports.passwordDigest = passwordDigest;\nexports.listen = listen;\nexports.WSDL = parser.WSDL;\nexports.XMLHandler = parser.XMLHandler;\nexports.NamespaceContext = parser.NamespaceContext;\nexports.QName = parser.QName;\n\n// Export Client and Server to allow customization\nexports.Server = Server;\nexports.Client = Client;\nexports.HttpClient = HttpClient;\n"],"file":"soap.js"}